(()=>{var t={386:t=>{function e(t,e){if((t=t.replace(/\s+/g,""))===(e=e.replace(/\s+/g,"")))return 1;if(t.length<2||e.length<2)return 0;let n=new Map;for(let e=0;e<t.length-1;e++){const o=t.substring(e,e+2),s=n.has(o)?n.get(o)+1:1;n.set(o,s)}let o=0;for(let t=0;t<e.length-1;t++){const s=e.substring(t,t+2),r=n.has(s)?n.get(s):0;r>0&&(n.set(s,r-1),o++)}return 2*o/(t.length+e.length-2)}t.exports={compareTwoStrings:e,findBestMatch:function(t,n){if(!function(t,e){return"string"==typeof t&&!!Array.isArray(e)&&!!e.length&&!e.find((function(t){return"string"!=typeof t}))}(t,n))throw new Error("Bad arguments: First argument should be a string, second should be an array of strings");const o=[];let s=0;for(let r=0;r<n.length;r++){const i=n[r],c=e(t,i);o.push({target:i,rating:c}),c>o[s].rating&&(s=r)}return{ratings:o,bestMatch:o[s],bestMatchIndex:s}}}}},e={};function n(o){var s=e[o];if(void 0!==s)return s.exports;var r=e[o]={exports:{}};return t[o](r,r.exports,n),r.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var o in e)n.o(e,o)&&!n.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{"use strict";class t{constructor(){this.links=new Set,this.questions=new Set,this.descriptions=new Set}}class e extends t{constructor(t=[]){super(),this.document=null,this.set(t)}set(t){t.forEach((t=>{t.questions.forEach((t=>this.questions.add(t))),t.descriptions.forEach((t=>this.descriptions.add(t))),t.links.forEach((t=>this.links.add(t)))}))}}class o extends t{set(t){const e=new DOMParser;this.document=e.parseFromString(t,"text/html"),Object.assign(self,{doc:this.document}),this.link()}link(){const t=this.document.querySelectorAll("#links > .result");for(let e of t){const t=e.querySelector(".result__title a"),n=e.querySelector(".result__title"),o=e.querySelector(".result__snippet"),s=[];null==o||o.querySelectorAll("b").forEach((t=>s.push(t))),this.links.add({title:null==n?void 0:n.textContent,text:null==o?void 0:o.textContent,href:null==t?void 0:t.getAttribute("href"),bold:s.map((t=>t.textContent))})}}}class s extends t{set(t){const e=new DOMParser;this.document=e.parseFromString(t,"text/html"),Object.assign(unsafeWindow,{doc:this.document}),this.description(),this.question(),this.link()}link(){const t=this.document.querySelectorAll(".g, .ZINbbc, .xpd, .O9g5cc, .uUPGi");for(let e of t){const t=e.querySelector(".yuRUbf > a"),n=e.querySelector(".yuRUbf > a > h3, .zBAuLc, .l97dzf"),o=e.querySelector(".IsZvec, .BNeawe, .s3v9rd, .AP7Wnd"),s=[];null==o||o.querySelectorAll("em").forEach((t=>s.push(t))),this.links.add({title:null==n?void 0:n.textContent,text:null==o?void 0:o.textContent,href:null==t?void 0:t.getAttribute("href"),bold:s.map((t=>t.textContent))})}}question(){const t=this.document.querySelectorAll(".BmkBMc");for(let e of t){const t=e.querySelector("g-inner-card .RqlTSb"),n=e.querySelector("g-inner-card .YQhxq");this.questions.add({text:null==t?void 0:t.textContent,answer:null==n?void 0:n.textContent})}}description(){const t=this.document.querySelectorAll(".hgKElc, .ILfuVd, .LGOjhe, .wDYxhc, .atOwb, .UMOHqf, .BNeawe, .s3v9rd, .AP7Wnd");for(let e of t){const t=e.querySelectorAll("b, .atOwb, .UMOHqf");this.descriptions.add({text:null==e?void 0:e.textContent,bold:Array.from(t).map((t=>t.textContent))})}}}var r=n(386),i=n.n(r);const c=async(t,n=["google","duckduckgo"])=>{const r=new e,i=new Array;if(n.includes("google")){const e=await(async t=>{const e=new URL("https://www.google.com");e.pathname="/search",e.searchParams.set("q",t);const n=await fetch(e.toString()),o=await n.text(),r=new s;return r.set(o),r})(t);i.push(e)}if(n.includes("duckduckgo")){const e=await(async t=>{const e=new URL("https://proxy-1.movie-web.workers.dev/");e.searchParams.set("destination","https://html.duckduckgo.com/html/?q="+t);const n=await fetch(e.toString()),s=await n.text(),r=new o;return r.set(s),r})(t);i.push(e)}return r.set(i),console.log(r.descriptions.size),r},l=async(t,e)=>{let n=[];for(let{answer:o}of e.questions){if(!o)continue;o.includes(".")&&(o=null==o?void 0:o.split(".")[0]);let e=i().compareTwoStrings(t,o);n.push({answer:o,similarity:e})}for(let{text:o}of e.links){if(!o)continue;o.includes("—")&&(o=o.split("—")[1]),o.includes(".")&&(o=null==o?void 0:o.split(".")[0]);let e=i().compareTwoStrings(t,o);n.push({answer:o,similarity:e})}for(let{text:o}of e.descriptions){if(!o)continue;let e=i().compareTwoStrings(t,o);n.push({answer:o,similarity:e})}let o=n.reduce((function(t,e){return t.similarity>e.similarity?t:e}));return o||0===e.descriptions.size?o||0===e.links.size?o:{answer:Array.from(e.links)[0].bold[0],similarity:.1}:{answer:Array.from(e.descriptions)[0].bold[0],similarity:.1}},a=t=>new Promise((e=>setTimeout((()=>e()),t)));unsafeWindow.document.body.append(Object.assign(document.createElement("style"),{innerText:"\n    /* width */\n    logger-object::-webkit-scrollbar {\n      width: 10px;\n    }\n    \n    /* Track */\n    logger-object::-webkit-scrollbar-track {\n      background: #f1f1f1; \n    }\n     \n    /* Handle */\n    logger-object::-webkit-scrollbar-thumb {\n      background: #888; \n    }\n    \n    /* Handle on hover */\n    logger-object::-webkit-scrollbar-thumb:hover {\n      background: #555; \n    }\n\n    logger-object {\n        opacity: 0.5;\n        transition:opacity 0.1s;\n        cursor: move;\n        user-select:none;\n        box-shadow: -2px 3px 14px 1px #00000085;\n    }\n\n    logger-object:hover {\n        opacity: 1;\n    }\n    \n    "}));const u=document.createElement("logger-object");Object.assign(u.style,{position:"absolute",top:"0",width:"400px",height:"50%",background:"rgb(30 30 30)",padding:"20px",paddingRight:"0px",paddingLeft:"0px",color:"white",overflow:"auto",margin:"20px",gap:"10px",display:"flex",flexDirection:"column"}),unsafeWindow.document.body&&unsafeWindow.document.body.append(u);var d,h,p,f,g=!1,m=0,w=0;function b(t){"touchstart"===t.type?(p=t.touches[0].clientX-m,f=t.touches[0].clientY-w):(p=t.clientX-m,f=t.clientY-w),t.path.includes(u)&&(g=!0)}function x(t){p=d,f=h,g=!1}function y(t){var e,n;g&&(t.preventDefault(),"touchmove"===t.type?(d=t.touches[0].clientX-p,h=t.touches[0].clientY-f):(d=t.clientX-p,h=t.clientY-f),m=d,w=h,e=d,n=h,u.style.transform="translate3d("+e+"px, "+n+"px, 0)")}unsafeWindow.document.addEventListener("touchstart",b,!1),unsafeWindow.document.addEventListener("touchend",x,!1),unsafeWindow.document.addEventListener("touchmove",y,!1),unsafeWindow.document.addEventListener("mousedown",b,!1),unsafeWindow.document.addEventListener("mouseup",x,!1),unsafeWindow.document.addEventListener("mousemove",y,!1);const v=t=>{const e=t[0];if(e.text.length>0)return e.text;const n=document.createElement("div");return n.innerHTML=e.html,n.textContent},k=JSON.parse;unsafeWindow.JSON.parse=(t,e)=>{const n=k(t,e);if("medias"in n&&void 0!==n.medias[0]){const{questions:t}=n.medias[0];(async t=>{for(let e of t){const t=v(e.body),n=await c(t);let o=[];for(let t of e.choices){const e=v(t.body),s=await l(e,n);null!=s&&o.push(s)}let s=0!==o.length?o.reduce((function(t,e){return t.similarity>e.similarity?t:e})):null;if(null!==s){const e=document.createElement("question-group"),n=document.createElement("question-object"),o=document.createElement("answer-object");Object.assign(o.style,{color:"#5fedffdb"}),Object.assign(e.style,{color:"white",fontSize:"12px",display:"flex",flexDirection:"column",padding:"5px",paddingRight:"20px",paddingLeft:"20px",background:"#282828"}),n.innerText=t,o.innerText=s.answer.replace(/\n/gm," ").trim(),e.append(n,o),u.append(e)}await a(1e3)}})(t)}return n}})()})();